# cyc_firmware

本项目用于管理和分发 CYC 相关固件文件，包含不同型号和版本的固件二进制文件、校验信息及相关工具。

## 目录说明

- `cyc/`：**生产目录**, 存放主固件文件及其校验信息。
  - `firmware.json`：固件的所有信息。
  - `firmware.md5`：固件信息文件的 MD5 校验值。
  - `*.bin`：不同型号和版本的固件二进制文件。
  - `*.json`：不同型号和版本固件的更新信息。
- `test/`：**测试目录**。
  - `main.go`：Go 语言测试主程序，运行程序后可在本地测试。
  - `gen_md5.sh`：用于生成 MD5 校验脚本， 运行：`bash gen_md5.sh`。
  - `cyc/`：测试固件及校验文件，和生产目录结构相同。

## 项目说明

### firmware.json

描述了控制器版本、子版本以及最新的固件版本。

字段含义：

- `latest`: 根据该字段判断是否是最新版本
- `url`: 固件的文件名
- `md5`: 固件的md5值
- `updateInfoFile`: 更新信息的json文件，建议和固件文件的名字相同

### 更新信息文件

用于描述新版本固件的信息。支持多语言。

字段说明：

- `version`: 版本号
- `date`: 更新日期
- `title`: 标题
- `content`: 更新内容，支持两种格式：以 `## ` (有空格)开头表示标题；否则表示普通文本

## 切换环境

`cyc/` 是生产目录，正式发布的包都会请求这个目录。

如果需要线上测试，则修改App项目中的 `domainUrl` 字段，改成 `test/cyc` 目录。

本工程支持本地，安装Golang后，cd 到 `test` 目录，执行 `Go run main.go`，将 App项目中的`domainUrl` 字段改成 `http://<你的IP>:8080/download/` 。



## 注意事项

- 修改 `firmware.json` 后一定要同步修改 `firmware.md5`